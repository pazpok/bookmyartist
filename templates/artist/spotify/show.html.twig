{% extends "base.html.twig" %}

{% block body %}
    <div class="container-fluid">
        <div class="mb-5">
            <h1 class="text-center">{{ user.artistId }} spotify</h1>
            <h3 class="text-center">{{ user.type }} | {% for genre in user.genre %}  {{ genre }} {% endfor %} </h3>
        </div>
        <div class="row mb-5">
            <div class="col mt-5">
                <img src="{{ asset('uploads/images/users/' ~ user.templateImage) }}" alt="">
            </div>
            <div class="col">
                <h2 class="text-center">{{ user.templateTitle }}</h2>
                <p>{{ user.templateDescription }}</p>
            </div>
        </div>
        <div class="border w-50 m-auto mb-5 mt-5">
            <h3 class="text-center">Musique spotify de {{ user.artistId }}</h3>
            <ul>
                <li><i class="fa fa-play"></i> Musique 1</li>
                <li><i class="fa fa-play"></i> Musique 2</li>
                <li><i class="fa fa-play"></i> Musique 3</li>
                <li><i class="fa fa-play"></i> Musique 4</li>
                <li><i class="fa fa-play"></i> Musique 5</li>
                <li><i class="fa fa-play"></i> Musique 6</li>
            </ul>
        </div>
        <div class="row mt-5">
            <div class="col text-center"><a href="{{ user.facebook }}"><i class="fa fa-facebook-official fa-2x"></i></a></div>
            <div class="col text-center"><a href="{{ user.twitter }}"><i class="fa fa-twitter fa-2x"></i></a></div>
            <div class="col text-center"><a href="{{ user.youtube }}"><i class="fa fa-youtube fa-2x"></i></a></div>
            <div class="col text-center"><a href="{{ user.soundcloud }}"><i class="fa fa-instagram fa-2x"></i></a></div>
        </div>

        <div class="row justify-content-around">
            <div class="border col-md-6 mt-5 ">
                <h3 class="text-center">Formule {{ user.artistId }}</h3>
                {% for formule in formules %}
                    <div class="border row">
                        <div class="col">
                            <h4>{{ formule.title }}</h4>
                            <p>{{ formule.description }}</p>
                            <p>Durée évènement : {{ formule.tpsEvent|date('H:i') }} | Temps installation : {{ formule.tpsInstall|date('H:i') }}</p>
                        </div>
                        <div class="col-xs-1 align-self-center">
                            <label>
                                <input type="checkbox">
                            </label>
                            <h5>{{ formule.price }}</h5>
                        </div>
                    </div>
                {% endfor %}
            </div>
            <div class="col-md-3 border mt-5 d-flex align-items-center">
                <ul class="mt-4 d-inline">
                    <li class="mb-4"><i class="fa fa-lock fa-2x"></i> Paiment 100% sécurisé</li>
                    <li class="mb-4"><i class="fa fa-warning fa-2x"></i> Assurance en cas d'annulation</li>
                    <li class="mb-4"><i class="fa fa-volume-control-phone fa-2x"></i> En lien direct avec l'artiste</li>
                </ul>
            </div>
        </div>
        <div class="cta-formule d-flex mb-5">
            <button class="btn">Valider</button>
        </div>
        <h4 class="text-center">Avis utilisateurs</h4>
        <div class="d-flex justify-content-center">
            <div class="border row col-md-7">
                <div class="col-md-2 mt-4">
                {% if app.user %}
                    {% if app.user.picture != null %}
                        <img src="{{ asset('uploads/images/users/' ~ user.picture) }}" alt="" class="rounded-circle">
                        <span class="btn btn-outline-primary">{{ app.user.email }}</span>
                    {% else %}
                        <div class="card-logo-top" style="">
                            <i class="fa fa-user fa-5x mr-3 " style="color: #eb6864;"></i>
                            <span class="btn btn-outline-primary">{{ app.user.email }}</span>
                        </div>
                    {% endif %}
                    {{ render(controller('App\\Controller\\AvisController:new', {'id': user.id}))}}
                {% else %}
                    <a class="btn btn-outline-primary" href="{{ path('app_login') }}">Se connecter</a>
                    <a class="btn btn-outline-primary" href="{{ path('app_register') }}">
                        <i class="fa fa-user-plus"></i>
                        Créer un compte
                    </a>
                {% endif %}
                {% for comment in comments %}
                    {% if comment.user.picture != null %}
                        <img src="{{ asset('uploads/images/users/' ~ comment.user.picture) }}" alt="" class="rounded-circle">
                        <span class="btn btn-outline-primary">{{ comment.user.email }}</span>
                    {% else %}
                        <div class="card-logo-top" style="">
                            <i class="fa fa-user fa-5x mr-3 " style="color: #eb6864;"></i>
                            <span class="btn btn-outline-primary">{{ comment.user.email }}</span>
                        </div>
                    {% endif %}
                    <div class="col">
                        <div class="border mt-4">
                            <p>{{ comment.commentaire }}</p>
                        </div>
                        <p>{{ comment.date|date("m/d/Y H-i") }}</p>
                {% endfor %}
                </div>
            </div>
        </div>
    </div>
{% endblock %}